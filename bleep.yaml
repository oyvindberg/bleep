$schema: https://raw.githubusercontent.com/oyvindberg/bleep/master/schema.json
$version: 0.0.1-M16
jvm:
  name: graalvm-java17:22.2.0
projects:
  bleep-cli:
    dependencies:
    - com.lihaoyi::pprint:0.8.0
    - com.monovore::decline:2.3.1
    - org.graalvm.nativeimage:svm:22.2.0
    - org.scalameta:svm-subs:101.0.0
    dependsOn: bleep-core
    extends:
    - template-common
    - template-scala-2.13
    platform:
      mainClass: bleep.Main
  bleep-cli-test:
    dependsOn: bleep-cli
    extends:
    - template-common-test
    - template-scala-2.13
  bleep-core:
    dependencies:
    - for3Use213: true
      module: ch.epfl.scala::bloop-config:1.5.4
    - com.lihaoyi::fansi:0.4.0
    - exclusions:
        org.scala-sbt: util-logging_2.13
      for3Use213: true
      module: org.scala-sbt::librarymanagement-core:1.7.1
    - org.virtuslab.scala-cli::bloop-rifle:0.1.16
    dependsOn: bleep-model
    extends: template-cross-all
    sources: ./../liberated/sbt-tpolecat/src/main/scala
  bleep-model:
    dependencies:
    - io.circe::circe-core:0.14.2
    - io.circe::circe-generic:0.14.2
    - io.circe::circe-parser:0.14.2
    - io.circe::circe-yaml:0.14.1
    - exclusions:
        org.scala-sbt: util-logging_2.13
      for3Use213: true
      module: io.get-coursier::coursier:2.1.0-M7-34-gf519b50a3
    - exclusions:
        org.scala-lang.modules: scala-collection-compat_2.13
      for3Use213: true
      module: io.get-coursier::coursier-jvm:2.1.0-M7-34-gf519b50a3
    - org.snakeyaml:snakeyaml-engine:2.5
    extends: template-cross-all
  bleep-tasks:
    dependsOn: bleep-core
    extends: template-cross-all
    resources: ./../liberated/sbt-native-image/plugin/src/main/resources
    sources: ./../liberated/sbt-native-image/plugin/src/main/scala
  bleep-tasks-mdoc:
    dependencies: org.jsoup:jsoup:1.15.3
    dependsOn: bleep-tasks
    extends: template-cross-all
    sources: ./../liberated/mdoc/mdoc-sbt/src/main/scala
  bleep-tasks-publishing:
    dependencies:
    - com.eed3si9n::gigahorse-okhttp:0.7.0
    - org.bouncycastle:bcpg-jdk15on:1.70
    - org.scala-lang.modules::scala-parser-combinators:2.1.1
    - org.sonatype.spice.zapper:spice-zapper:1.3
    - org.wvlet.airframe::airframe-http:22.4.2
    - se.sawano.java:alphanumeric-comparator:1.4.1
    dependsOn: bleep-tasks
    extends:
    - template-common
    - template-cross-jvm-212-213
    sources:
    - ./../liberated/sbt-ci-release/plugin/src/main/scala
    - ./../liberated/sbt-dynver/dynver/src/main/scala
    - ./../liberated/sbt-dynver/sbtdynver/src/main/scala
    - ./../liberated/sbt-git-versioning/src/main/scala
    - ./../liberated/sbt-pgp/gpg-library/src/main/scala
    - ./../liberated/sbt-pgp/sbt-pgp/src/main/scala
    - ./../liberated/sbt-sonatype/src/main/scala
  bleep-tasks-publishing-test:
    dependsOn: bleep-tasks-publishing
    extends:
    - template-common-test
    - template-cross-jvm-212-213
  bleep-test-harness:
    dependencies: org.scalatest::scalatest:3.3.0-SNAP3
    dependsOn: bleep-core
    extends:
    - template-common
    - template-cross-jvm-212-213
  scripts:
    dependsOn:
    - bleep-tasks-mdoc
    - bleep-tasks-publishing
    extends:
    - template-common
    - template-scala-2.13
  scripts-init:
    dependencies: build.bleep::bleep-tasks-publishing:${BLEEP_VERSION}
    extends:
    - template-common
    - template-scala-2.13
scripts:
  generate-resources: scripts-init/bleep.scripts.GenerateResources
  generate-videos: scripts/bleep.scripts.GenVideos
  native-image: scripts/bleep.scripts.GenNativeImage
  publish: scripts/bleep.scripts.Publish
  publish-local: scripts/bleep.scripts.PublishLocal
templates:
  template-common:
    platform:
      name: jvm
    scala:
      options: -encoding utf8 -feature -language:experimental.macros -language:higherKinds
        -language:implicitConversions -unchecked
  template-common-test:
    dependsOn: bleep-test-harness
    extends: template-common
    isTestProject: true
  template-cross-all:
    cross:
      jvm3:
        extends: template-scala-3
    extends:
    - template-common
    - template-cross-jvm-212-213
  template-cross-jvm-212-213:
    cross:
      jvm212:
        extends: template-scala-2.12
      jvm213:
        extends: template-scala-2.13
  template-scala-2.12:
    scala:
      strict: true
      version: 2.12.15
  template-scala-2.13:
    scala:
      strict: true
      version: 2.13.8
  template-scala-3:
    scala:
      strict: true
      version: 3.2.0
